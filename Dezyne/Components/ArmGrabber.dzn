import IgrabDisk.dzn;

component Arm {
	provides IArm arm;
	
	//grab is move to belt and grab it
	//move is move the object to internal system
	//reset is move back to initial position
	
	behaviour {
		enum State {initial, grabbing, moving, final};
		State state = State.initial;
		
		[state.initial] {
			on arm.grabDisk(): state = State.grabbing;
			on arm.moveDisk(), arm.resetPos(): illegal;
		}
		[state.grabbing] {
			on arm.moveDisk(): state = State.moving;
			on arm.resetPos(): state = State.initial;
			on arm.grabDisk(): illegal;
			on inevitable: { arm.finishedReq(); state = State.final; }
		}
		[state.moving] {
			on arm.grabDisk(): state = State.grabbing;
			on arm.resetPos(): state = State.initial;
			on arm.moveDisk(): illegal;
			on inevitable: { arm.finishedReq(); state = State.final; }
		}
		[state.final] {
			on inevitable: state = State.initial;
		}
	}
}